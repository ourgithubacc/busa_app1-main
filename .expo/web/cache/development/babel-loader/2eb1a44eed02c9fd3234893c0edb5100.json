{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport React, { useEffect, useState } from 'react';\nimport { useNavigation } from '@react-navigation/native';\nimport Events from \"./Events\";\nimport { EVENTS } from \"../data/eventData\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport axios from 'axios';\nimport client from \"../api/client\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar EventsScreen = function EventsScreen() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    events = _useState2[0],\n    setEvents = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    userInfo = _useState4[0],\n    setUserInfo = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    userToken = _useState6[0],\n    setUserToken = _useState6[1];\n  var getEventData = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        var value = yield AsyncStorage.getItem('userInfo');\n        var _userToken = yield AsyncStorage.getItem('userToken');\n        if (value !== null) {\n          setUserInfo(JSON.parse(value));\n          setUserToken(_userToken);\n        }\n      } catch (e) {\n        console.log(\"\" + e);\n      }\n    });\n    return function getEventData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    getEventData();\n  }, []);\n  var token = userToken;\n  var config = {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  };\n  var getEvents = function getEvents() {\n    if (events.length === 0) {\n      axios.get(\"https://code-6z3x.onrender.com/api/events/getMainCampusEvents/1/2\", config).then(function (res) {\n        console.log(res);\n      }).catch(function (e) {\n        console.log(\"\" + e);\n      });\n    }\n  };\n  useEffect(function () {\n    getEvents();\n  }, []);\n  var navigation = useNavigation();\n  return _jsx(SafeAreaView, {\n    style: {\n      flex: 1,\n      top: 40\n    },\n    children: _jsx(FlatList, {\n      showsVerticalScrollIndicator: false,\n      vertical: true,\n      data: events,\n      bounces: false,\n      decelerationRate: \"fast\",\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item,\n          id = _ref2.id;\n        return _jsx(Events, {\n          event: item,\n          navigation: navigation\n        }, id);\n      }\n    })\n  });\n};\nexport default EventsScreen;\nvar styles = StyleSheet.create({});\n{}","map":{"version":3,"names":["React","useEffect","useState","useNavigation","Events","EVENTS","AsyncStorage","axios","client","EventsScreen","events","setEvents","userInfo","setUserInfo","userToken","setUserToken","getEventData","value","getItem","JSON","parse","e","console","log","token","config","headers","Authorization","getEvents","length","get","then","res","catch","navigation","flex","top","item","id","styles","StyleSheet","create"],"sources":["C:/Users/STEPHEN/Desktop/busa_app1-main/screens/EventScreen.js"],"sourcesContent":["import { StyleSheet, SafeAreaView, TouchableOpacity, ScrollView, FlatList, Text } from 'react-native'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useNavigation } from '@react-navigation/native'\r\nimport Events from './Events'\r\nimport { EVENTS } from '../data/eventData'\r\nimport AsyncStorage from '@react-native-async-storage/async-storage'\r\nimport axios from 'axios'\r\nimport client from '../api/client'\r\n\r\n//get the userInfo, and if the event.campus tallies, show the post\r\n\r\n\r\nconst EventsScreen = () => {\r\n\r\n\r\n  const [events, setEvents] = useState([])\r\n\r\n\r\n\r\n  const [userInfo, setUserInfo] = useState(null)\r\n  const [userToken, setUserToken] = useState(null)\r\n\r\n  const getEventData = async()=>{\r\n    try {\r\n      const value = await AsyncStorage.getItem('userInfo')\r\n      const userToken = await AsyncStorage.getItem('userToken')\r\n      if(value !== null) {\r\n      setUserInfo(JSON.parse(value))\r\n      setUserToken(userToken)\r\n      }\r\n\r\n    } catch(e) {\r\n      console.log(`${e}`)\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    getEventData()\r\n  },[])\r\n\r\n\r\n  const token = userToken\r\n  // console.log(token)\r\n    const config ={\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        }\r\n      }\r\n\r\n  const getEvents =()=>{\r\n    if(events.length === 0 ){\r\n\r\n      axios.get(`https://code-6z3x.onrender.com/api/events/getMainCampusEvents/1/2`, config\r\n      )\r\n      .then((res)=>{\r\n       console.log(res)\r\n       // setEvents([...events, ...res.data.data])\r\n      }).catch((e)=>{\r\n    console.log(`${e}`)\r\n      })\r\n    }\r\n   \r\n  }\r\n\r\n  useEffect(()=>{\r\n    getEvents()\r\n  },[])\r\n\r\n \r\n\r\n\r\n\r\n  // don't forget to run the get all events through axios\r\n    const navigation = useNavigation()\r\n    return (\r\n      <SafeAreaView style={{flex:1, top:40}}>\r\n     <FlatList\r\n    //  onEndReachedThreshold={0.5}\r\n    //  ref={ref}\r\n    //  onMomentumScrollEnd={updateCurrentSlideIndex}\r\n  // onEndReached={}\r\n\r\n     showsVerticalScrollIndicator={false}\r\n     vertical\r\n     data={events}\r\n     bounces={false}\r\n     decelerationRate={\"fast\"}\r\n    //  keyExtractor={item=>item.id}\r\n     renderItem={({item, id}) => \r\n    <Events event={item} key={id} navigation={navigation}/>\r\n    }\r\n   />\r\n     \r\n     </SafeAreaView>\r\n\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n \r\nexport default EventsScreen\r\n\r\nconst styles = StyleSheet.create({})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  {/* <ScrollView showsVerticalScrollIndicator={false} bounces={false}>\r\n          {EVENTS.map((event, id)=>(\r\n                 <TouchableOpacity\r\n                 key={id}\r\n                 activeOpacity={1}>\r\n                   <Events event={event} key={id} navigation={navigation}/>\r\n                 </TouchableOpacity>\r\n              ))}\r\n             </ScrollView> */}"],"mappings":";;;;;;;;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,aAAa,QAAQ,0BAA0B;AACxD,OAAOC,MAAM;AACb,SAASC,MAAM;AACf,OAAOC,YAAY,MAAM,2CAA2C;AACpE,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM;AAAqB;AAKlC,IAAMC,YAAY,GAAG,SAAfA,YAAY,GAAS;EAGzB,gBAA4BP,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAjCQ,MAAM;IAAEC,SAAS;EAIxB,iBAAgCT,QAAQ,CAAC,IAAI,CAAC;IAAA;IAAvCU,QAAQ;IAAEC,WAAW;EAC5B,iBAAkCX,QAAQ,CAAC,IAAI,CAAC;IAAA;IAAzCY,SAAS;IAAEC,YAAY;EAE9B,IAAMC,YAAY;IAAA,6BAAG,aAAS;MAC5B,IAAI;QACF,IAAMC,KAAK,SAASX,YAAY,CAACY,OAAO,CAAC,UAAU,CAAC;QACpD,IAAMJ,UAAS,SAASR,YAAY,CAACY,OAAO,CAAC,WAAW,CAAC;QACzD,IAAGD,KAAK,KAAK,IAAI,EAAE;UACnBJ,WAAW,CAACM,IAAI,CAACC,KAAK,CAACH,KAAK,CAAC,CAAC;UAC9BF,YAAY,CAACD,UAAS,CAAC;QACvB;MAEF,CAAC,CAAC,OAAMO,CAAC,EAAE;QACTC,OAAO,CAACC,GAAG,MAAIF,CAAC,CAAG;MACrB;IACF,CAAC;IAAA,gBAZKL,YAAY;MAAA;IAAA;EAAA,GAYjB;EAEDf,SAAS,CAAC,YAAI;IACZe,YAAY,EAAE;EAChB,CAAC,EAAC,EAAE,CAAC;EAGL,IAAMQ,KAAK,GAAGV,SAAS;EAErB,IAAMW,MAAM,GAAE;IACZC,OAAO,EAAE;MACPC,aAAa,cAAYH;IACzB;EACF,CAAC;EAEL,IAAMI,SAAS,GAAE,SAAXA,SAAS,GAAM;IACnB,IAAGlB,MAAM,CAACmB,MAAM,KAAK,CAAC,EAAE;MAEtBtB,KAAK,CAACuB,GAAG,sEAAsEL,MAAM,CACpF,CACAM,IAAI,CAAC,UAACC,GAAG,EAAG;QACZV,OAAO,CAACC,GAAG,CAACS,GAAG,CAAC;MAEjB,CAAC,CAAC,CAACC,KAAK,CAAC,UAACZ,CAAC,EAAG;QAChBC,OAAO,CAACC,GAAG,MAAIF,CAAC,CAAG;MACjB,CAAC,CAAC;IACJ;EAEF,CAAC;EAEDpB,SAAS,CAAC,YAAI;IACZ2B,SAAS,EAAE;EACb,CAAC,EAAC,EAAE,CAAC;EAOH,IAAMM,UAAU,GAAG/B,aAAa,EAAE;EAClC,OACE,KAAC,YAAY;IAAC,KAAK,EAAE;MAACgC,IAAI,EAAC,CAAC;MAAEC,GAAG,EAAC;IAAE,CAAE;IAAA,UACvC,KAAC,QAAQ;MAMT,4BAA4B,EAAE,KAAM;MACpC,QAAQ;MACR,IAAI,EAAE1B,MAAO;MACb,OAAO,EAAE,KAAM;MACf,gBAAgB,EAAE,MAAO;MAEzB,UAAU,EAAE;QAAA,IAAE2B,IAAI,SAAJA,IAAI;UAAEC,EAAE,SAAFA,EAAE;QAAA,OACvB,KAAC,MAAM;UAAC,KAAK,EAAED,IAAK;UAAU,UAAU,EAAEH;QAAW,GAA3BI,EAAE,CAA2B;MAAA;IACtD;EACA,EAEe;AAGpB,CAAC;AAOD,eAAe7B,YAAY;AAE3B,IAAM8B,MAAM,GAAGC,UAAU,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;AAsBlC,CAQ2B"},"metadata":{},"sourceType":"module"}